<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>PVCollection</title>
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css">
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/docs.css">
    <style>
      body > .navbar .brand {
        float:left;
        text-shadow: rgba(255, 255, 255, 0.0980392) 0px 1px 0px, rgba(255, 255, 255, 0.4) 0px 0px 30px;
        color: white;
        margin-left:0px;
        font-weight:normal;
      }
      
      .bs-docs-sidenav.affix {
        box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.5);
        z-index: 10;
      }
      
      .bs-docs-sidenav i{
        width: 8px;
        height: 8px;
        padding: 0px;
        margin: 0px;
        display: inline-block;
        margin-right:0.5em;
      }
      
      .bs-docs-sidenav > li > a {
          word-wrap: break-word;
      }
      
      .bs-docs-sidenav > li:first-child > a {
        border-top-right-radius: 6px;
        border-top-left-radius: 6px;
      }
      
      code[class*="language-"],pre[class*="language-"]{color:black;text-shadow:0 1px white;font-family:Consolas,Monaco,'Andale Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*="language-"],pre[class*="language-"]{background:#f5f2f0}:not(pre)>code[class*="language-"]{padding:.1em;border-radius:.3em}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray}.token.punctuation{color:#999}.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number{color:#905}.token.selector,.token.attr-name,.token.string{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.regex,.token.important{color:#e90}.token.important{font-weight:bold}.token.entity{cursor:help}
      div.description {margin: 14px 0; padding-top: 14px; border-bottom:1px solid #eee; }
      .tags {}
      .ctx-type {
        display:inline-block;
        margin-right:0.5em;
        //- float:right; margin-top:8px
      }
      
      footer iframe{vertical-align:middle;}
      
    </style>
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Doxx</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>PVCollection</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li><a href="index.html">Main</a></li>
            <li class="active"><a href="PVCollection.js.html">PVCollection.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
              <li><a href="#PVCollection"><i class="alert alert-success"></i><span>PVCollection</span></a>
              </li>
              <li><a href="#Collection"><i class="alert alert-success"></i><span>Collection</span></a>
              </li>
              <li><a href="#_initialize"><i class="alert alert-info"></i><span>_initialize</span></a>
              </li>
              <li><a href="#initialize"><i class="alert alert-info"></i><span>initialize</span></a>
              </li>
              <li><a href="#isDirty"><i class="alert alert-info"></i><span>isDirty</span></a>
              </li>
              <li><a href="#isSaving"><i class="alert alert-info"></i><span>isSaving</span></a>
              </li>
              <li><a href="#isSorted"><i class="alert alert-info"></i><span>isSorted</span></a>
              </li>
              <li><a href="#toJSON"><i class="alert alert-info"></i><span>toJSON</span></a>
              </li>
              <li><a href="#clean"><i class="alert alert-info"></i><span>clean</span></a>
              </li>
              <li><a href="#get"><i class="alert alert-info"></i><span>get</span></a>
              </li>
              <li><a href="#first"><i class="alert alert-info"></i><span>first</span></a>
              </li>
              <li><a href="#last"><i class="alert alert-info"></i><span>last</span></a>
              </li>
              <li><a href="#set"><i class="alert alert-info"></i><span>set</span></a>
              </li>
              <li><a href="#add"><i class="alert alert-info"></i><span>add</span></a>
              </li>
              <li><a href="#remove"><i class="alert alert-info"></i><span>remove</span></a>
              </li>
              <li><a href="#where"><i class="alert alert-info"></i><span>where</span></a>
              </li>
              <li><a href="#sort"><i class="alert alert-info"></i><span>sort</span></a>
              </li>
              <li><a href="#filter"><i class="alert alert-info"></i><span>filter</span></a>
              </li>
              <li><a href="#map"><i class="alert alert-info"></i><span>map</span></a>
              </li>
              <li><a href="#contains"><i class="alert alert-info"></i><span>contains</span></a>
              </li>
              <li><a href="#clear"><i class="alert alert-info"></i><span>clear</span></a>
              </li>
              <li><a href="#render"><i class="alert alert-info"></i><span>render</span></a>
              </li>
              <li><a href="#fetch"><i class="alert alert-info"></i><span>fetch</span></a>
              </li>
              <li><a href="#save"><i class="alert alert-info"></i><span>save</span></a>
              </li>
              <li><a href="#onSort"><i class="alert alert-info"></i><span>onSort</span></a>
              </li>
              <li><a href="#onClear"><i class="alert alert-info"></i><span>onClear</span></a>
              </li>
              <li><a href="#onChange"><i class="alert alert-info"></i><span>onChange</span></a>
              </li>
              <li><a href="#onRender"><i class="alert alert-info"></i><span>onRender</span></a>
              </li>
              <li><a href="#onBeforeRender"><i class="alert alert-info"></i><span>onBeforeRender</span></a>
              </li>
              <li><a href="#Model"><i class="alert alert-success"></i><span>Model</span></a>
              </li>
              <li><a href="#render"><i class="alert alert-info"></i><span>render</span></a>
              </li>
              <li><a href="#getAttributes"><i class="alert alert-info"></i><span>getAttributes</span></a>
              </li>
              <li><a href="#parser"><i class="alert alert-info"></i><span>parser</span></a>
              </li>
              <li><a href="#toJSON"><i class="alert alert-info"></i><span>toJSON</span></a>
              </li>
              <li><a href="#onChange"><i class="alert alert-info"></i><span>onChange</span></a>
              </li>
              <li><a href="#onRender"><i class="alert alert-info"></i><span>onRender</span></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="span9">
          <div class="description"><p>globals Handlebars, JST, moment</p> </div>
          <section id="PVCollection">
            <h1>PVCollection</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-success radius ctx-type">declaration</div><span>PVCollection</span>
            </p>
          </section>
          <div class="description"><p>exported PVCollection</p> </div>
          <pre><code class="language-javascript">var PVCollection = (function() {</code></pre>
          <section id="Collection">
            <h1>Collection</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-success radius ctx-type">constructor</div><span>Collection()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>opt</td>
                <td>object</td>
                <td><p>Object of options</p></td>
              </tr>
              <tr>
                <td>model</td>
                <td>object</td>
                <td><p>The model object base</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Collection Class</p> </div>
          <pre><code class="language-javascript">var Collection = function(opt, model) {
	if (!opt) {
		throw new Error('No options provided for Collection!');
	}
	if (!model) {
		throw new Error('No model provided for Collection!');
	}

	// basic props
	this.id = guid();
	this.name = opt.name || this.id;
	this.options = opt;
	this.debug = opt.debug || false;
	this.initialized = false;
	this.created = moment();

	// template
	this.template = opt.template ? this.initTemplate(opt.template) : null;
	this._hasBeenRendered = false;
	this.templateRender = null;

	// status props
	this._isSorted = true;
	this._dirty = false;
	this._isSaving = false;
	this.length = 0;

	// function overwrite
	$.extend(true, this, opt.functions);

	// model
	this.model = model;

	// collection
	this.items = [];

	// events
	this._events = {};

	// do anything that needs to get initialized
	this._initialize.apply(this, this.options);
};</code></pre>
          <section id="_initialize">
            <h1>_initialize</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype._initialize()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>options</td>
                <td>object</td>
                <td><p>The options from the constructors are passed to this method</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Internal Initialization method<br />initialize is for user content, set some basic stuff first</p> </div>
          <pre><code class="language-javascript">Collection.prototype._initialize = function(options) {
	this.log(['collection init', this.name]);

	// set basic events
	this.on('sort', this.onSort);
	this.on('beforeRender', this.onBeforeRender);
	this.on('render', this.onRender);
	this.on('change', this.onChange);
	this.on('clear', this.onClear);

	// init incremented id
	initIncrementId();

	// call user init function here
	this.initialize.apply(this, this.options);

	this.initialized = true;
	this.trigger('initialized', {
		options: options
	});
};</code></pre>
          <section id="initialize">
            <h1>initialize</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.initialize()</span>
            </p>
          </section>
          <div class="description"><p>User overridable init method.</p> </div>
          <pre><code class="language-javascript">Collection.prototype.initialize = function() {};</code></pre>
          <section id="isDirty">
            <h1>isDirty</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.isDirty()</span> -><span>bool</span>
            </p>
          </section>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.isDirty = function() {
	return this._isDirty;
};</code></pre>
          <section id="isSaving">
            <h1>isSaving</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.isSaving()</span> -><span>bool</span>
            </p>
          </section>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.isSaving = function() {
	return this._isSaving;
};</code></pre>
          <section id="isSorted">
            <h1>isSorted</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.isSorted()</span> -><span>bool</span>
            </p>
          </section>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.isSorted = function() {
	return this._isSorted;
};</code></pre>
          <section id="toJSON">
            <h1>toJSON</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.toJSON()</span> -><span>Object String</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>true</td>
                <td>Bool</td>
                <td><p>for stringified return, false for object</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Object,String</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.toJSON = function(stringified) {
	var result = {
		name: this.name,
		id: this.id,
		created: this.created.format(),
		length: this.items.length,
		items: (function(items) {
			return items.map(function(x) {
				return x.toJSON();
			});
		})(this.items)
	};

	if (stringified) {
		return JSON.stringify(result);
	} else {
		return result;
	}
};</code></pre>
          <section id="clean">
            <h1>clean</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.clean()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>deep</td>
                <td>Bool</td>
                <td><p>clean with true</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>clean the collection from dirty status. optionally, clean each item in the list as well.</p> </div>
          <pre><code class="language-javascript">Collection.prototype.clean = function(deep) {
	this.log(['collection clean']);

	this._dirty = false;

	if (deep) {
		this.items.forEach(function(item, idx, arr) {
			item.clean();
		});
	}
};</code></pre>
          <section id="get">
            <h1>get</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.get()</span> -><span>Object</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>index</td>
                <td>Int</td>
                <td><p>of model in the collection</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.get = function(index) {
	this.log(['collection get', index]);

	if (!isNaN(index) &amp;&amp; index &gt; -1) {
		return this.items[index];
	} else {
		return this.items;
	}
};</code></pre>
          <section id="first">
            <h1>first</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.first()</span> -><span>Object</span>
            </p>
          </section>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.first = function() {
	this.log(['collection first']);

	if (this.length) {
		return this.items[0];
	} else {
		return null;
	}
};</code></pre>
          <section id="last">
            <h1>last</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.last()</span> -><span>Object</span>
            </p>
          </section>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.last = function() {
	this.log(['collection last']);

	if (this.length) {
		return this.items[this.length - 1];
	} else {
		return null;
	}
};</code></pre>
          <section id="set">
            <h1>set</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.set()</span> -><span>Object</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>array</td>
                <td>Array</td>
                <td><p>of items to be set as the new content of the collection</p></td>
              </tr>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td><p>for setting the content</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.set = function(items, options) {
	options = options || {};

	var self = this,
		addedItems = [],
		removedItems = [],
		changedItems = [],
		toBeRemoved = [],
		toBeChanged = [];

	this.log(['collection set', items, options]);

	// list is not sorted
	this._isSorted = false;

	// find items that change or get removed
	this.items.forEach(function(oldItem, idx, arr) {
		// if we cannot find this unique item in the new list, add it to the to be removed list
		// otherwise add it to the to be changed list
		var itemIdx = items.map(function(x) {
			return x[oldItem._uniqueField];
		}).indexOf(oldItem.attributes[oldItem._uniqueField]);

		if (itemIdx === -1) {
			toBeRemoved.push(oldItem);
		} else {
			toBeChanged.push(oldItem);
		}
	});

	// process toBeRemoved
	toBeRemoved.forEach(function(item, idx, arr) {
		// if we need processing done on items before they are removed, do that here
		// TODO remove hook

		// otherwise proceed to remove item, silently
		removedItems.push(self.remove(item, {
			silent: true,
			returnItem: true
		}));
	});

	// process to be changed
	toBeChanged.forEach(function(oldItem, idx, arr) {
		// TODO - provide the attributes that changed as well
		var newIdx = items.indexOf(oldItem.attributes[oldItem._uniqueField]),
			newItem = items.splice(newIdx, 1)[0];

		var changedItem = oldItem.set(newItem, false, true);

		if (Object.keys(changedItem.changedAttributes).length) {
			changedItems.push(oldItem);
		}
	});

	// new we only have remaining new items in the items list
	addedItems = items.slice(0);
	this.add(items, {
		silent: true,
		noSort: true
	});

	// sort list
	// TODO when sorting is remembered, do that here
	this.sort();

	// set length
	this.length = this.items.length;

	this._hasBeenRendered = false;

	if (!options.silent) {
		this.trigger('change', {
			added: addedItems,
			removed: removedItems,
			changed: changedItems
		});
	}

	return this;
};</code></pre>
          <section id="add">
            <h1>add</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.add()</span> -><span>Object</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>array</td>
                <td>Array</td>
                <td><p>of items to be added to the collection</p></td>
              </tr>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td><p>for setting the content</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.add = function(items, options) {
	this.log(['collection add', items, options]);

	options = options || {};

	items = items || [];
	if (!$.isArray(items)) {
		items = [items];
	}

	var collection = this,
		addedItems = [];

	items.forEach(function(itemData, idx, arr) {
		var newModel = $.extend(true, {}, collection.model, {
			collection: collection
		}, options);
		var newItem = new Model(newModel, $.extend(true, {}, collection.model.attributes, itemData));

		collection.items.push(newItem);
		addedItems.push(newItem);
	});

	this._hasBeenRendered = false;

	// set length
	this.length = this.items.length;

	// sort if requested
	if (!options.noSort) {
		// TODO
		// add list sort func here
		this.sort();
	}

	if (!options.silent) {
		this.trigger('change', {
			added: addedItems.slice(0),
			removed: [],
			changed: []
		});
	}

	return this;
};</code></pre>
          <section id="remove">
            <h1>remove</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.remove()</span> -><span>Object</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>id,</td>
                <td></td>
                <td><p>model or other unique identifier to select removed model</p></td>
              </tr>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td><p>for setting the content</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"> </div>
          <pre><code class="language-javascript">Collection.prototype.remove = function(_id, options) {
	this.log(['collection remove', _id, options]);

	options = options || {};

	var id = -1,
		itemIndex,
		removedModel;

	// parse what the request item is
	// support either string/number for id or passing in a model to remove it
	if (!isNaN(parseInt(_id, 10))) {
		id = parseInt(_id, 10);
	} else if (_id instanceof Model) {
		// use the model's &quot;unique field&quot;
		// id = _id.attributes.id;
		id = _id.attributes[_id._uniqueField];
	} else {
		return false;
	}

	// get the array index of the item
	itemIndex = this.items.map(function(i) {
		return i.attributes[i._uniqueField];
	}).indexOf(id);

	// save the model for the event
	removedModel = this.items.splice(itemIndex, 1);

	// set length
	this.length = this.items.length;

	this._hasBeenRendered = false;

	if (!options.silent) {
		this.trigger('change', {
			added: [],
			removed: [removedModel],
			changed: []
		});
	}

	if (options.returnItem) {
		return removedModel;
	} else {
		return this;
	}
};</code></pre>
          <section id="where">
            <h1>where</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.where()</span> -><span>Array</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>array</td>
                <td></td>
                <td><p>of items to be set as the new content of the collection</p></td>
              </tr>
              <tr>
                <td>value</td>
                <td></td>
                <td><p>for key</p></td>
              </tr>
              <tr>
                <td>flag</td>
                <td>Bool</td>
                <td><p>for using internal values intead of attributes</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Array</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>get an array of items where attributes[key] === value.<br />first argument can also be a function that will be used for the grep instead<br />if internal is true, then &quot;private&quot; properties can be compared</p> </div>
          <pre><code class="language-javascript">Collection.prototype.where = function(key, value, internal) {
	this.log(['collection where', key, value, internal]);

	// if the first argument was a function
	if (typeof key === &quot;function&quot;) {
		internal = value;

		// key gets item, index passed to it
		return $.grep(this.items, key);

	} else {
		return $.grep(this.items, function(item, idx) {
			if (internal) {
				return item[key] === value;
			} else {
				return item.attributes[key] === value;
			}
		});
	}
};</code></pre>
          <section id="sort">
            <h1>sort</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.sort()</span> -><span>Object</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>sorting</td>
                <td>Function</td>
                <td><p>comparator - function(item, index, array)</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>sort the collection with a custom function or default to defautl sorting</p> </div>
          <pre><code class="language-javascript">Collection.prototype.sort = function(options, fn) {
	this.log(['collection sort', options, fn]);

	if (typeof options === &quot;function&quot;) {
		fn = options;
		options = {};
	}

	this.items.sort(fn || function(a, b) {
		return a.attributes[a._uniqueField] &lt; b.attributes[b._uniqueField];
	});

	if (!options || !options.silent) {
		this.trigger('sort', {});
	}

	this._isSorted = true;

	return this;
};</code></pre>
          <section id="filter">
            <h1>filter</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.filter()</span> -><span>Array</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>function(item,</td>
                <td>Function</td>
                <td><p>index, array)</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Array</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>filter using a custom fiter</p> </div>
          <pre><code class="language-javascript">Collection.prototype.filter = function(fn) {
	this.log(['collection filter', fn]);

	if (typeof fn !== &quot;function&quot;) {
		throw new Error(&quot;Argument must be a function&quot;);
	}

	return this.items.filter(fn);
};</code></pre>
          <section id="map">
            <h1>map</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.map()</span> -><span>Array</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>function(item)</td>
                <td>Function</td>
                <td></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Array</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>run Array.map on the items array</p> </div>
          <pre><code class="language-javascript">Collection.prototype.map = function(fn) {
	this.log(['collection map', fn]);

	if (typeof fn !== &quot;function&quot;) {
		throw new Error(&quot;Argument must be a function&quot;);
	}

	return this.items.map(fn);
};</code></pre>
          <section id="contains">
            <h1>contains</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.contains()</span> -><span>Bool</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>function(element,</td>
                <td>Function</td>
                <td><p>index, array) { return elem &gt; 10; }</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Bool</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>returns boolean if an item in collection matches comparator fn</p> </div>
          <pre><code class="language-javascript">Collection.prototype.contains = function(fn) {
	this.log(['collection contains', fn]);

	return this.items.some(fn);
};</code></pre>
          <section id="clear">
            <h1>clear</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.clear()</span> -><span>Object</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>clear the whole list</p> </div>
          <pre><code class="language-javascript">Collection.prototype.clear = function(options) {
	this.log(['collection clear', options]);

	this.trigger('clear', {
		items: this.items.slice(0)
	});

	// clear all items
	this.items = [];

	return this;
};</code></pre>
          <section id="render">
            <h1>render</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.render()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>return</td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>render the whole list, and optionally child models</p> </div>
          <pre><code class="language-javascript">Collection.prototype.render = function(options) {
	options = options || {};

	var listItems = [];

	this.log(['collection render', options]);

	// TODO
	// add $el?

	// if we don't have a template, return json
	if (!this.template) {
		return this.toJSON();
	}

	// if we either don't have it at all, or the model has changed since last render
	if (!this._hasBeenRendered || options.force) {

		this.trigger('beforeRender', {
			options: options
		});

		this.templateRender = this.template({
			id: this.id,
			name: this.name,
			created: this.created.format(),
			items: this.map(function(item) {
				return item.render();
			})
		});

		this._hasBeenRendered = true;
	}

	// trigger event
	this.trigger('render', {
		options: options
	});

	return this.templateRender;
};</code></pre>
          <section id="fetch">
            <h1>fetch</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.fetch()</span> -><span>Function</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>url</td>
                <td>String</td>
                <td></td>
              </tr>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Function</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>built in quick fetch, overwrite this method to change functionality</p> </div>
          <pre><code class="language-javascript">Collection.prototype.fetch = function(url, options) {
	this.log(['collection fetch', url, options]);

	var fetch = $.Deferred,
		errorMessage = '',
		data = {},
		fetchStatus = 'pending',
		collection = this;

	fetch
		.done(function(result) {
			if (!result.items || !$.isArray(result.items)) {
				collection.log(['Fetch result was not an array of items'], 'warn');
			} else {
				data = result.data ? result.data : {};
				collection.set(result.items, {});
			}
		})
		.fail(function(result) {
			errorMessage = result.errorMessage;
			data = result.data ? result.data : {};
		})
		.always(function(result) {
			this.trigger('load', {
				result: this.status(),
				error: errorMessage,
				data: data
			});
		});

	return fetch;
};</code></pre>
          <section id="save">
            <h1>save</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.save()</span> -><span>Function</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Function</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>hand the items over to a third party method that saves them and lets us know</p> </div>
          <pre><code class="language-javascript">Collection.prototype.save = function(options) {
	this.log(['collection save', options]);


	var saveObject = {
			deferred: $.Deferred,
			items: this.get()
		},
		collection = this;

	// TODO
	// crate deferred and attach callbacks to it
	// attach deferred and changed models to outputObect
	// external saving call will resolve deferred once it's done

	saveObject.deferred.always(function(result) {

		if (result.status === 'success') {
			if (!result.items || !result.items.length) {
				// deeply mark as clean
				collection.clean(true);
			} else {
				// TODO
				// this shouldn't trigger anything else, it's a set to update possible serverside changes to client
				collection.set(result.items, {
					silent: true
				});
			}
		}

		this.trigger('save', {
			status: result.status,
			errorMessage: result.errorMessage,
			result: result
		});
	});

	return saveObject;
};</code></pre>
          <section id="onSort">
            <h1>onSort</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.onSort()</span>
            </p>
          </section>
          <div class="description"><p>Base onSort event handler</p> </div>
          <pre><code class="language-javascript">Collection.prototype.onSort = function(evt) {
	this.log(['collection sort event handler', evt]);
};</code></pre>
          <section id="onClear">
            <h1>onClear</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.onClear()</span>
            </p>
          </section>
          <div class="description"><p>Base onClear event handler</p> </div>
          <pre><code class="language-javascript">Collection.prototype.onClear = function(evt) {
	this.log(['collection clear event handler', evt]);

	this.length = 0;
};</code></pre>
          <section id="onChange">
            <h1>onChange</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.onChange()</span>
            </p>
          </section>
          <div class="description"><p>Base onChange event handler</p> </div>
          <pre><code class="language-javascript">Collection.prototype.onChange = function(evt) {
	this.log(['collection change event handler', evt]);
};</code></pre>
          <section id="onRender">
            <h1>onRender</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.onRender()</span>
            </p>
          </section>
          <div class="description"><p>Base onRender event handler, called after render is done</p> </div>
          <pre><code class="language-javascript">Collection.prototype.onRender = function(evt) {
	this.log(['collection render event handler', evt]);
};</code></pre>
          <section id="onBeforeRender">
            <h1>onBeforeRender</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Collection.prototype.onBeforeRender()</span>
            </p>
          </section>
          <div class="description"><p>Base onBeforeRender event handler</p> </div>
          <pre><code class="language-javascript">Collection.prototype.onBeforeRender = function(evt) {
	this.log(['collection before render event handler', evt]);
};
// -- end Collection Class</code></pre>
          <section id="Model">
            <h1>Model</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-success radius ctx-type">constructor</div><span>Model()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>opt</td>
                <td>object</td>
                <td><p>Options object</p></td>
              </tr>
              <tr>
                <td>attributes</td>
                <td>object</td>
                <td><p>Object of attributes that the new model will have</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Model Class</p> </div>
          <pre><code class="language-javascript">var Model = function(opt, attributes) {
	opt = opt || {};

	// basic props
	this.guid = guid();
	this.options = opt;
	this.debug = opt.debug || false;
	this._dirty = false;

	// tracks changed attributes
	this.changedAttributes = {};

	// this._synced = true;
	// this.validate = false;

	this.collection = opt.collection || null;
	this._uniqueField = 'id';
	this.created = moment();
	this.modified = moment();

	// attributes
	this.attributes = attributes || {};

	// if there's no value for the unique field, add one
	if (Object.keys(this.attributes).indexOf(this._uniqueField) === -1 || !this.attributes[this._uniqueField]) {
		this.attributes[this._uniqueField] = uid();
	}

	// merge functions into this class
	$.extend(true, this, opt.functions);

	// template/dom
	this._hasBeenRendered = false;
	this.$el = null;
	this.template = opt.template ? this.initTemplate(opt.template) : null;
	this.templateRender = '';

	// TODO
	// link the $el to a dom element or query

	// events
	this._events = {};

	// do anything that needs to get initialized
	this._initialize.apply(this, this.options);
};

// internal init
Model.prototype._initialize = function(options) {
	this.log(['model init', options]);

	this.initialize.apply(this, this.options);

	// render template
	if (this.template) {
		this.render();
	}

	this._dirty = false;

	// set the basic events
	this.on('dirty', this.onDirty);
	this.on('change', this.onChange);
	this.on('render', this.onRender);

};

// user init
Model.prototype.initialize = function(options) {};

// mark model as clean
Model.prototype.clean = function(opt) {
	this.changedAttributes = {};
	this._dirty = false;
};

// return single value or object of values from array of keys
Model.prototype.get = function(key) {
	this.log(['model get', key]);

	if (!key) {
		return this.getAttributes();
	} else if ($.isArray(key)) {
		var result = {},
			model = this;

		// go through each key, extend objects or assign values
		key.forEach(function(k, i, a) {
			if (typeof model[k] === &quot;object&quot;) {
				result[k] = $.extend(true, {}, model.attributes[k]);
			} else {
				result[k] = model.attributes[k];
			}
		});

		return result;

	} else {
		return this.attributes[key];
	}
};

Model.prototype.set = function(key, value, internal, silent) {
	this.log(['model set', key, value, internal, silent]);

	var changedAttributes = [],
		model = this,
		localProp = null;

	// if the key is an object, we shift the arguments, as we don't have a value
	if (typeof key === &quot;object&quot;) {
		silent = internal;
		internal = value;
		value = null;

		if (internal) {
			model = $.extend(true, {}, model, key);
		} else {
			model.attributes = $.extend(true, {}, model.attributes, key);
		}

		// add the changed attributes into the model for tracking
		for (var k in key) {
			if (key.hasOwnProperty(k)) {
				localProp = internal ? this[k] : this.attributes[k];

				if (!isEqual(localProp, key[k])) {
					this.changedAttributes[k] = key[k];
					localProp = null;
				}
			}
		}

	} else {
		if (internal) {
			model[key] = value;
		} else {
			model.attributes[key] = value;
		}

		this.changedAttributes[key] = value;
	}

	// check if anything actually changed and change timestamp
	if (Object.keys(this.changedAttributes).length) {
		this.modified = moment();
	}

	if (!silent) {
		this.trigger('change', {
			changed: changedAttributes,
			timestamp: this.modified
		});
	}

	// set to dirty
	this._dirty = true;
	this.trigger('dirty', {});

	return this;
};</code></pre>
          <section id="render">
            <h1>render</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Model.prototype.render()</span> -><span>String</span>
            </p>
          </section>
          <div class="description"><p>render<br />render item from template, or if item is clean, just return the already rendered html</p> </div>
          <pre><code class="language-javascript">Model.prototype.render = function(options) {
	this.log(['model render', options]);

	// if we don't have a template, return json
	if (!this.template) {
		return this.toJSON();
	}

	// if we either don't have it at all, or the model has changed since last render
	if (!this._hasBeenRendered) {
		// add the guid of the model in the template for use
		this.templateRender = this.template($.extend(true, {
			guid: this.guid
		}, this.attributes));
		this._hasBeenRendered = true;
	}

	// trigger event
	this.trigger('render', {
		options: options
	});

	return this.templateRender;
};</code></pre>
          <section id="getAttributes">
            <h1>getAttributes</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Model.prototype.getAttributes()</span> -><span>Object</span>
            </p>
          </section>
          <div class="description"><p>getAttributes</p> </div>
          <pre><code class="language-javascript">Model.prototype.getAttributes = function() {
	this.log(['model getAttributes']);

	return this.attributes;
};</code></pre>
          <section id="parser">
            <h1>parser</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Model.prototype.parser()</span> -><span>Object</span>
            </p>
          </section>
          <div class="description"><p>parser</p> </div>
          <pre><code class="language-javascript">Model.prototype.parser = function(input) {
	this.log(['model parser'], input);

	var output = {};

	return output;
};</code></pre>
          <section id="toJSON">
            <h1>toJSON</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Model.prototype.toJSON()</span> -><span>String</span>
            </p>
          </section>
          <div class="description"><p>toJSON</p> </div>
          <pre><code class="language-javascript">Model.prototype.toJSON = function() {
	return $.extend(true, {}, this.attributes);
};</code></pre>
          <section id="onChange">
            <h1>onChange</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Model.prototype.onChange()</span>
            </p>
          </section>
          <div class="description"><p>Base onChange event handler</p> </div>
          <pre><code class="language-javascript">Model.prototype.onChange = function(evt) {
	this.log(['model change event handler', evt]);
};</code></pre>
          <section id="onRender">
            <h1>onRender</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>Model.prototype.onRender()</span>
            </p>
          </section>
          <div class="description"><p>Base onRender event handler</p> </div>
          <pre><code class="language-javascript">Model.prototype.onRender = function(evt) {
	this.log(['model render event handler', evt]);
};</code></pre>
          <div class="description"><p>Base onDirty event handler, model has become dirty</p> </div>
          <pre><code class="language-javascript">return true;
	};

	// return
	return Collection;

})();</code></pre>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with <a href="https://github.com/FGRibreau/doxx">Doxx </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
        <p>Doxx is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des réseaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="http://platform.twitter.com/widgets.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script src="http://leaverou.github.com/prefixfree/prefixfree.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-transition.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-collapse.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-affix.js"></script>
    <script>
      /**
       * Prism: Lightweight, robust, elegant syntax highlighting
       * MIT license http://www.opensource.org/licenses/mit-license.php/
       * @author Lea Verou http://lea.verou.me
       */(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data));l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r){return n.stringify(t.tokenize(e,r))},tokenize:function(e,n){var r=t.Token,i=[e],s=n.rest;if(s){for(var o in s)n[o]=s[o];delete n.rest}e:for(var o in n){if(!n.hasOwnProperty(o)||!n[o])continue;var u=n[o],a=u.inside,f=!!u.lookbehind||0;u=u.pattern||u;for(var l=0;l<i.length;l++){var c=i[l];if(i.length>e.length)break e;if(c instanceof r)continue;u.lastIndex=0;var h=u.exec(c);if(h){f&&(f=h[1].length);var p=h.index-1+f,h=h[0].slice(f),d=h.length,v=p+d,m=c.slice(0,p+1),g=c.slice(v+1),y=[l,1];m&&y.push(m);var b=new r(o,a?t.tokenize(h,a):h);y.push(b);g&&y.push(g);Array.prototype.splice.apply(i,y)}}}return i},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]"){for(var r=0;r<e.length;r++)e[r]=n.stringify(e[r]);return e.join("")}var i={type:e.type,content:n.stringify(e.content),tag:"span",classes:["token",e.type],attributes:{}};i.type=="comment"&&(i.attributes.spellcheck="true");t.hooks.run("wrap",i);var s="";for(var o in i.attributes)s+=o+'="'+(i.attributes[o]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();;
      Prism.languages.markup={comment:/&lt;!--[\w\W]*?--(&gt;|&gt;)/g,prolog:/&lt;\?.+?\?&gt;/,doctype:/&lt;!DOCTYPE.+?&gt;/,cdata:/&lt;!\[CDATA\[[\w\W]+?]]&gt;/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?&gt;/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|&gt;|"/g}},punctuation:/\/?&gt;/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});;
      Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:/@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,property:/(\b|\B)[a-z-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});;
      Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
      Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});;
      
    </script>
    <!-- App js-->
    <script>
      $(function(){
        var $window = $(window);
        $('.scrollspy .nav').affix({
          offset: {
            top: function () { return $window.width() <= 980 ? 480 : 400 }
          , bottom: 50
          }
        });
      })
    </script>
  </body>
</html>